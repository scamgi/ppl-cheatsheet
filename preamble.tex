% preamble.tex - Packages, custom commands, and styling

% --- Page Layout & Geometry ---
\usepackage[
    landscape,
    a4paper,
    margin=1.5cm,
    headheight=13.6pt
]{geometry}
\usepackage{multicol} % For two-column layout
\usepackage{fancyhdr} % For custom headers and footers
\usepackage{titlesec} % To control section formatting

% --- General Packages ---
\usepackage{amsmath} % For math environments
\usepackage{graphicx} % To include images
\usepackage{lipsum}   % For generating dummy text
\usepackage{xcolor}   % For defining custom colors

% --- Section Formatting ---
% Make each \section start on a new page
\newcommand{\sectionbreak}{\clearpage}

% --- Code Listing Setup (with tcolorbox) ---
\usepackage{listings}
\usepackage{tcolorbox}
\tcbuselibrary{listings}

% Define custom colors
\definecolor{codegray}{gray}{0.95}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{codeblue}{rgb}{0,0,1}
\definecolor{codegreen}{rgb}{0,0.5,0}

% Custom tcolorbox style for code listings
\newtcbinputlisting{\mycode}[2][]{%
  listing file={#2},
  colback=codegray,
  colframe=black!75,
  listing only,
  left=5mm,
  right=5mm,
  top=3mm,
  bottom=3mm,
  boxrule=0.5pt,
  arc=2mm,
  title=File: \texttt{#2},
  listing options={
    language=Haskell, % Default language, can be overridden
    basicstyle=\ttfamily\small,
    keywordstyle=\color{codepurple}\bfseries,
    stringstyle=\color{codeblue},
    commentstyle=\color{codegreen}\itshape,
    numberstyle=\tiny\color{black!50},
    breaklines=true,
    showstringspaces=false,
    numbers=left,
    numbersep=5pt,
    #1 % Allow passing extra options
  }
}

% Define styles for specific languages
\lstdefinestyle{racketstyle}{
  language=[SML]Racket,
  morekeywords={define, lambda, if, else, cond, let, let*, begin, set!, require, provide},
}

\lstdefinestyle{haskellstyle}{
  language=Haskell,
}

\lstdefinestyle{erlangstyle}{
  language=Erlang,
  morekeywords={module, export, define, case, of, when, receive, after, fun, spawn, send},
}
