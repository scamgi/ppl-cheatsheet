% preamble.tex - Packages, custom commands, and styling

% --- Page Layout & Geometry ---
\usepackage[
    landscape,
    a4paper,
    margin=1.5cm,
    headheight=13.6pt
]{geometry}
\usepackage{multicol} % For two-column layout
\usepackage{fancyhdr} % For custom headers and footers
\usepackage{titlesec} % To control section formatting

% --- General Packages ---
\usepackage[T1]{fontenc}    % Use 8-bit T1 fonts to correctly render special characters
\usepackage[utf8]{inputenc} % Specify UTF-8 input encoding
\usepackage{amsmath}        % For math environments
\usepackage{graphicx}       % To include images
\usepackage{lipsum}         % For generating dummy text
\usepackage{xcolor}         % For defining custom colors

% --- Section Formatting ---
% Make each \section start on a new page
\newcommand{\sectionbreak}{\clearpage}

% --- Code Listing Setup (with tcolorbox) ---
\usepackage{listings}
\usepackage{tcolorbox}
\tcbuselibrary{listings, breakable}

% --- Configure listings to handle UTF-8 characters ---
\lstset{
    inputencoding=utf8,
    extendedchars=true
}

% Define custom colors
\definecolor{codegray}{gray}{0.90}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{codeblue}{rgb}{0,0,1}
\definecolor{codegreen}{rgb}{0,0.5,0}

% --- Define base language styles for listings ---
\lstdefinestyle{racketstyle}{
  language=Lisp,
  morekeywords={define, lambda, if, else, cond, let, let*, begin, set!, require, provide, displayln},
  basicstyle=\ttfamily\small,
  keywordstyle=\color{codepurple}\bfseries,
  stringstyle=\color{codeblue},
  commentstyle=\color{codegreen}\itshape,
  numberstyle=\tiny\color{black!50},
  breaklines=true,
  showstringspaces=false,
}

\lstdefinestyle{haskellstyle}{
  language=Haskell,
  basicstyle=\ttfamily\small,
  keywordstyle=\color{codepurple}\bfseries,
  stringstyle=\color{codeblue},
  commentstyle=\color{codegreen}\itshape,
  numberstyle=\tiny\color{black!50},
  breaklines=true,
  showstringspaces=false,
}

\lstdefinestyle{erlangstyle}{
  language=Erlang,
  morekeywords={module, export, define, case, of, when, receive, after, fun, spawn, send},
  basicstyle=\ttfamily\small,
  keywordstyle=\color{codepurple}\bfseries,
  stringstyle=\color{codeblue},
  commentstyle=\color{codegreen}\itshape,
  numberstyle=\tiny\color{black!50},
  breaklines=true,
  showstringspaces=false,
}

% --- Create dedicated tcolorbox environments for each language ---
\newtcblisting{racketcode}{
  listing only,
  breakable,
  colback=codegray,
  colframe=black!75,
  boxrule=0.5pt,
  arc=2mm,
  left=5mm,
  listing options={style=racketstyle, numbers=left, numbersep=5pt}
}

\newtcblisting{haskellcode}{
  listing only,
  breakable,
  colback=codegray,
  colframe=black!75,
  boxrule=0.5pt,
  arc=2mm,
  left=5mm,
  listing options={style=haskellstyle, numbers=left, numbersep=5pt}
}

\newtcblisting{erlangcode}{
  listing only,
  breakable,
  colback=codegray,
  colframe=black!75,
  boxrule=0.5pt,
  arc=2mm,
  left=5mm,
  listing options={style=erlangstyle, numbers=left, numbersep=5pt}
}
